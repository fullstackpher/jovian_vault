---
date: 2026-01-29
focus_areas:
  - å‰ç«¯
  - å­¦ä¹ 
time: 4å°æ—¶
tags:
  - æ—¥æŠ¥
---
## â° æ—¶é—´åˆ†é…
```mermaid
pie title ä»Šæ—¥æ—¶é—´åˆ†é…
    "ç¼–ç " : 4
    "å­¦ä¹ " : 2
    "è§£å†³é—®é¢˜" : 1
    "è§„åˆ’" : 1
```

### ğŸ“‹ é¡¹ç›®è¿›å±•
```dataviewjs
// 1. å®šä¹‰æ•°æ®æ¥æºï¼šå¯ä»¥æŒ‰æ–‡ä»¶å¤¹æˆ–æ ‡ç­¾ç­›é€‰
// ç¤ºä¾‹Aï¼šè·å–æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ç¬”è®°
const pages = dv.pages('"01-é¡¹ç›®"');
// ç¤ºä¾‹Bï¼šæˆ–è·å–åŒ…å«ç‰¹å®šæ ‡ç­¾ï¼ˆå¦‚#é¡¹ç›®ï¼‰çš„æ‰€æœ‰ç¬”è®°
// const pages = dv.pages('#é¡¹ç›®');

// 2. å®šä¹‰çœ‹æ¿çš„åˆ—ï¼Œä¸ä½ â€œçŠ¶æ€â€å­—æ®µçš„å€¼ä¿æŒä¸€è‡´
const columns = ["å¾…å¤„ç†", "è¿›è¡Œä¸­", "å·²å®Œæˆ"];

// 3. ä¸ºæ¯ä¸€åˆ—æ¸²æŸ“å¡ç‰‡
for (let col of columns) {
    // ç­›é€‰å‡ºâ€œçŠ¶æ€â€å­—æ®µç­‰äºå½“å‰åˆ—åçš„ç¬”è®°
    const filesInColumn = pages.where(p => p.çŠ¶æ€ === col);
    
    // æ¸²æŸ“åˆ—æ ‡é¢˜ï¼ˆåŒ…å«è¯¥åˆ—ä¸‹çš„ç¬”è®°æ•°é‡ï¼‰
    dv.header(3, col + ` (${filesInColumn.length})`);
    
    // ä»¥åˆ—è¡¨å½¢å¼æ¸²æŸ“å¡ç‰‡ï¼Œæ˜¾ç¤ºç¬”è®°é“¾æ¥å’Œä¼˜å…ˆçº§ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
    dv.list(filesInColumn.map(p => {
        let display = p.file.link;
        if (p.ä¼˜å…ˆçº§) {
            display += ` âœ ä¼˜å…ˆçº§ï¼š${p.ä¼˜å…ˆçº§}`;
        }
        return display;
    }));
}
```

## ğŸ“ˆ è¿›åº¦è¿½è¸ª

**é¡¹ç›®è¿›åº¦**ï¼š
```dataviewjs
// ä½¿ç”¨ DataviewJS æŸ¥è¯¢ Tasks æ’ä»¶çš„æ•°æ®
const pages = dv.pages('#é¡¹ç›®')
  .where(p => p.çŠ¶æ€ === "è¿›è¡Œä¸­")
  .where(p => !p.file.path.includes("_Templates/"));

if (pages.length === 0) {
    dv.paragraph("å½“å‰æ²¡æœ‰è¿›è¡Œä¸­çš„æŠ€æœ¯æ ˆé¡¹ç›®");
} else {
    let tableData = [];
    
    for (let page of pages) {
        // æŸ¥è¯¢è¯¥é¡µé¢ä¸­çš„æ‰€æœ‰ä»»åŠ¡
        const tasks = dv.pages(`"${page.file.path}"`).file.tasks;
        
        if (tasks && tasks.length > 0) {
            const completedTasks = tasks.filter(t => t.completed).length;
            const totalTasks = tasks.length;
            const progressPercent = Math.round((completedTasks / totalTasks) * 100);
            
            // åˆ›å»ºç®€æ´çš„è¿›åº¦æ¡
            const progressBar = createSimpleProgressBar(progressPercent);
            
            tableData.push([
                page.file.link,
                progressBar,
                `${progressPercent}%`,
                `${completedTasks}/${totalTasks}`,
                page.æˆªæ­¢æ—¶é—´ ? dv.date(page.æˆªæ­¢æ—¶é—´).toFormat("MM-dd") : "-"
            ]);
        } else {
            // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä»»åŠ¡ï¼Œä½¿ç”¨å…¶ä»–æ–¹æ³•
            const content = page.file.content || "";
            const allTasks = content.match(/^\s*(?:>\s*)?[*-]\s*\[( |x|X|\/)\].*$/gm) || [];
            const completedTasks = allTasks.filter(task => 
                /\[(x|X|\/)\]/.test(task)
            ).length;
            
            const totalTasks = allTasks.length;
            const progressPercent = totalTasks > 0 ? 
                Math.round((completedTasks / totalTasks) * 100) : 0;
            
            tableData.push([
                page.file.link,
                createSimpleProgressBar(progressPercent),
                `${progressPercent}%`,
                `${completedTasks}/${totalTasks}`,
                page.æˆªæ­¢æ—¶é—´ ? dv.date(page.æˆªæ­¢æ—¶é—´).toFormat("MM-dd") : "-"
            ]);
        }
    }
    
    // æŒ‰è¿›åº¦æ’åº
    tableData.sort((a, b) => {
        const percentA = parseInt(a[2]);
        const percentB = parseInt(b[2]);
        return percentB - percentA; // é™åºæ’åˆ—
    });
    
    dv.table(
        ["é¡¹ç›®", "è¿›åº¦", "å®Œæˆç‡", "ä»»åŠ¡", "æˆªæ­¢"],
        tableData
    );
}

function createSimpleProgressBar(percent) {
    const width = 10;
    const filled = Math.floor(percent / (100 / width));
    const empty = width - filled;
    
    const filledChar = 'â– ';
    const emptyChar = 'â–¡';
    
    return `<span style="color: #1dd1a1">${filledChar.repeat(filled)}</span>` +
           `<span style="color: #636e72">${emptyChar.repeat(empty)}</span>`;
}
```

## ğŸ“ ä»Šæ—¥å®Œæˆ

- å­¦ä¹ JavaScriptæ•°ç»„ï¼ŒåŒ…è£…ç±»å‹ï¼Œå€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹

### ğŸ”§ é—®é¢˜è§£å†³

- 

### ğŸ“š æŠ€æœ¯å­¦ä¹ 

- å­¦ä¹ JSæ•°ç»„ï¼ŒåŒ…è£…ç±»å‹ï¼ŒMathå¯¹è±¡

## ğŸ¯ æ˜æ—¥è®¡åˆ’

- å­¦ä¹ Dateå¯¹è±¡ï¼ŒDOM
